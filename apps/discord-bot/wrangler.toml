#:schema node_modules/wrangler/config-schema.json
name = "listentomore-discord-bot"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Smart placement for optimal performance
[placement]
mode = "smart"

# Observability
[observability]
enabled = true

# KV Namespace for caching (shared with web app)
[[kv_namespaces]]
binding = "CACHE"
id = "a6011a8b5bac4be9a472ff86f8d5fd91"
preview_id = "d6703c6a7283467eb7a452a6cb34fa87"

# Environment variables (non-sensitive defaults)
[vars]
ENVIRONMENT = "development"

# Production environment overrides
[env.production]
vars = { ENVIRONMENT = "production" }

# Note: Secrets should be set with `wrangler secret put`:
# Discord:
# - DISCORD_TOKEN
# - DISCORD_APPLICATION_ID
# - DISCORD_PUBLIC_KEY
# Services:
# - SPOTIFY_CLIENT_ID
# - SPOTIFY_CLIENT_SECRET
# - SPOTIFY_REFRESH_TOKEN
# - LASTFM_API_KEY
# - OPENAI_API_KEY
# - PERPLEXITY_API_KEY
# Apple MusicKit (for streaming links):
# - APPLE_KEY_ID
# - APPLE_TEAM_ID
# - APPLE_PRIVATE_KEY
